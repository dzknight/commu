<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="www.silver.dao.IF_MemberDAO">
	<insert id="insertOne" parameterType="www.silver.vo.MemberVO">	
	INSERT INTO `sys`.`member` (`member_id`, `name`, `password`, `address`,`detailaddress`,`fullemail`, `fullphonenumber`, `zipcode`, `reg_date`, `birth_date`,`profile_img`) VALUES
 (#{userid}, #{username}, #{password}, #{address},#{detailAddress},#{fullEmail}, #{fullPhoneNumber}, #{zipcode}, default, #{birthdate}, #{profileImagePath})	
	</insert>
	<select id="selectOne" resultType="www.silver.vo.MemberVO" parameterType="String" >
		select * from `sys`.`member` where member_id=#{userid}
	</select>

   <!-- 모든 회원 조회 -->
    <select id="selectAllMembers" resultType="www.silver.vo.MemberVO" >
        SELECT 
            member_id as userId,
            password,
            name as username,
            fullEmail,
            profile_img as profileImagePath,
            reg_date as regDate
        FROM `sys`.`member` 
        ORDER BY reg_date DESC
    </select>
    
     <!-- 특정 회원 조회 -->
    <select id="selectMemberById" parameterType="String" resultType="www.silver.vo.MemberVO" >
        SELECT 
            member_id as userid,
            password,
            name as username,
            fullEmail,
            profile_img as profileImagePath,
            reg_date as regDate
        FROM `sys`.`member` 
        WHERE member_id=#{userid}
    </select>
    
     <!-- 회원 정보 수정 -->
    <update id="updateMember" parameterType="www.silver.vo.MemberVO" >
        UPDATE `sys`.`member`  SET
            name = #{username},
            fullEmail = #{fullemail}
            <if test="profileImagePath != null">
                , profile_img = #{profileImagePath}
            </if>
        WHERE member_id = #{userId}
    </update>
    
         <!-- 회원 비밀번호 수정 -->
    <update id="updateMemberPass" parameterType="www.silver.vo.MemberVO" >
        UPDATE `sys`.`member`  SET
            password= #{password}
        WHERE member_id = #{userid}
    </update>
    
    <!-- 회원 삭제 -->
    <delete id="deleteMember" parameterType="String">
        DELETE FROM `sys`.`member` WHERE member_id =#{userId}
    </delete>
</mapper>